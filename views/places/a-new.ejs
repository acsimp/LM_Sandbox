<% include ../partials/header %>

    <div class="row"></div>
        <h1 class="mt-3" style="text-align:center">Add This Place:</h1>
        <div style="width:30%; min-width:250px; margin: 25px auto; ">
           
           <form action="/places" method="POST">
                <div class="form-group">
                    <label class="label" for="name">Name</label>
                    <input class="form-control" type="text" id="name" name="name" placeholder="name" value="" readonly>
                </div>
                <div class="form-group">
                    <label class="label" for="formattedAddress">Address</label>
                    <input class="form-control" type="text" id ="formattedAddress" name="formattedAddress" placeholder="formattedAddress" value="" readonly>
                </div>                
                <!--<div class="form-group">-->
                <!--    <label class="label" for="latitude">Latitude</label>-->
                <!--    <input class="form-control" type="hidden" id="latitude" name="latitude" placeholder="latitude" value="" readonly>-->
                <!--</div>                -->
                <!--<div class="form-group">-->
                <!--    <label class="label" for="longitude">Longitude</label>-->
                <!--    <input class="form-control" type="hidden" id="longitude" name="longitude" placeholder="longitude" value="" readonly>-->
                <!--</div>-->
                <!--<div class="form-group">-->
                <!--    <label class="label" for="_wpURL">Apple Card</label>-->
                <!--    <input class="form-control" type="text" id="_wpURL" name="_wpURL" placeholder="_wpURL" value="" readonly>-->
                <!--</div>-->
                <!--<div class="form-group">-->
                <!--    <label class="label" for="muid">Apple Place ID</label>-->
                <!--    <input class="form-control" type="hidden" id="muid" name="muid" placeholder="muid" value="" readonly>-->
                <!--</div>                -->
                <!--<div class="form-group">-->
                <!--    <label class="label" for="googlePlaceID">Google Place ID</label>-->
                <!--    <input class="form-control" type="text" id="googlePlaceID" name="googlePlaceID" placeholder="*No Google Place was found or selected" value="" readonly>-->
                <!--</div>-->
                <!--<div class="form-group">-->
                <!--    <label class="label" for="fbPlaceID">Facebook ID</label>-->
                <!--    <input class="form-control" type="text" id="fbPlaceID" name="fbPlaceID" placeholder="*No Facebook Place was found or selected" value="" readonly>-->
                <!--</div>-->
                
                    <input class="form-control" type="hidden" id="latitude" name="latitude" placeholder="latitude" value="" readonly>
                    <input class="form-control" type="hidden" id="longitude" name="longitude" placeholder="longitude" value="" readonly>
                    <input class="form-control" type="hidden" id="fbPlaceID" name="fbPlaceID" placeholder="*No Facebook Place was found or selected" value="" readonly>
                    <input class="form-control" type="hidden" id="fbPlaceID" name="fbPlaceID" placeholder="*No Facebook Place was found or selected" value="" readonly>
                    <input class="form-control" type="hidden" id="muid" name="muid" placeholder="muid" value="" readonly>
                    <input class="form-control" type="hidden" id="_wpURL" name="_wpURL" placeholder="_wpURL" value="" readonly>
            
            
                      <img class="" id="imageThumb" src= "" width="300">
                
                <div class="form-group">
                    <label class="label" for="imageURL">Image URL</label>
                    <input class="form-control" type="text" id="imageURL" name="imageURL" placeholder="*No image available" value="" readonly>
                </div>


                        <h5 class="text-uppercase text-info">Why should this place be in the database?</h5>
   
                            <div class="items">
                                <input class="checkbox" id="food_service" name="food_service" value="yes" type="checkbox">
                                <label class="checkbox_label" for="food_service">Food</label>
                                
                                <input class="checkbox" id="nappy_change_facilities" name="nappy_change_facilities" value="yes" type="checkbox">
                                <label class="checkbox_label" for="nappy_change_facilities">Nappy Change Facilities</label>
                                
                            </div> 


                <div class="form-group">
                <button class="btn btn-lg btn-primary btn-block" onclick="clearSession()">Save</button>
                </div>
            </form>
           
           <p id="session"></p>
           
            <a onclick="goBack()" href="#">Go Back</a>
        </div>
        
        <script>
            var placeData = JSON.parse(sessionStorage.getItem('placeData'));
            var fbPlaceID = sessionStorage.getItem('fbPlaceID');
            var googlePlaceID = sessionStorage.getItem('googlePlaceID');
            var imageURL = sessionStorage.getItem('imageURL');

            // sessionStorage.removeItem('placeData');
            $(document).ready(function() {
              $('#name').val(placeData.name);
              $('#formattedAddress').val(placeData.formattedAddress);
              $('#latitude').val(placeData.coordinate.latitude);
              $('#longitude').val(placeData.coordinate.longitude);
              $('#muid').val(placeData.muid);
              $('#_wpURL').val(placeData._wpURL);
              if (googlePlaceID) {
                  $('#googlePlaceID').val(googlePlaceID);
              };
              if (fbPlaceID) {
                  $('#fbPlaceID').val(fbPlaceID);
              };
              if (imageURL) {
                  $('#imageURL').val(imageURL);
                  $('#imageThumb').attr({
                      src: imageURL,
                    });
              };
            });

            function clearSession() {
                sessionStorage.removeItem('placeData');
                sessionStorage.removeItem('fbPlaceID');
                sessionStorage.removeItem('googlePlaceID');
                sessionStorage.removeItem('imageURL');
            };  
            

function goBack() {
    window.history.back();
}
</script>
   
   
<% include ../partials/footer %>